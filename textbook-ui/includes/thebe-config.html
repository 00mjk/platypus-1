<script type="text/x-thebe-config">{
  requestKernel: true,
  binderOptions: {
    repo: "qiskit-community/qiskit-textbook",
    ref: "thebe-stable",
  },
  codeMirrorConfig: {
    theme: "abcdef",
    mode: "python"
  },
  kernelOptions: {
    kernelName: "python3",
    path: "."
  },
  mathjaxUrl: "https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"
}
</script>

<script defer>
  const thebelabBootstrap = function () {
    thebelab.bootstrap()
    thebelab.on("status", function (evt, data) {
      console.log("Thebelab status changed:", data.status, data.message)
    })
  }

  // check if Thebelab needs to be loaded
  if (document.querySelector("[data-executable]")) {
    /**
     * Thebelab loads "reset CSS" after the theme styles load and so,
     * it invalidates part of the theme rules. To make the theme CSS to take
     * the correct precedence, we listen for Thebelab to finish loading, then
     * relocate the theme CSS and start Thebelab.
     */
    const thebelabScript = document.createElement('script');
    thebelabScript.src = "https://unpkg.com/thebelab@latest/lib/index.js"
    thebelabScript.async = true
    thebelabScript.onload = () => {
      setTimeout(() => {
        document.head.append(
          ...document.querySelectorAll('#theme-style, #custom-style')
        )
      })
      
      window.textbook.runAfterDOMLoaded(thebelabBootstrap)
    }
    document.head.append(thebelabScript);
  }
</script>
